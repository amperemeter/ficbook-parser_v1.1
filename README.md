# Ficbook Works Parser
Парсер для сайта [ficbook.net](https://ficbook.net), отслеживающий появление новых фанфиков в выбранных фандомах или пэйрингах. 

Чтобы парсер заработал, нужно:
#### Создать проект
1. Установить на компьютер `Nodejs`.
2. Создать папку проекта и разместить внутри нее файлы [index.js](index.js), [package.json](package.json) и [fanfics.json](fanfics.json) из репозитория.
3. Установить необходимые для работы парсера пакеты, введя в терминале (cmd в Windows) команду `[npm install]`. Вы должны находиться в папке проекта.
#### Создать данные
4. Создать в файле `fanfics.json` объекты c названием нужного вам фэндома или пэйринга, ссылкой на него и количеством фанфиков в значении 0.  
* Выглядеть должно аналогично: `{ "name": "Гарри Поттер", "url": "https://ficbook.net/fanfiction/books/harri_potter", "count": 0 }`.  
* Если в ссылке имеется кириллица, она должна быть закодирована в кодировке UTF-8 . Например: `https://ficbook.net/pairings/%D0%9D%D1%83%D0%B0%D0%B4%D0%B0---%D0%9D%D1%83%D0%B0%D0%BB%D0%B0`).  
* В самом файле имеется пример того, как должны выглядеть данные.
#### Запустить парсер 
5. Запустить парсер в терминале стандартной командой `[node index.js]` или `[node .]`. Первый запуск парсера добавит количество фанфиков в базу данных. Последующие запуски отобразят количество новых фанфиков при их наличии.

## Хранение данных в Mongodb
При желании вы можете хранить данные не локально в файле `fanfics.json`, а в базе данных в облачном хранилище. 
Для этого воспользуйтесь [следующей инструкцией](mongodb/README-MONGODB.md). Если вы всё же хотите хранить данные локально, рекомендую на случай непредвиденных ошибок создать копию файла `fanfics.json`.

## Создание ссылки на страницу фильтра
Если вы хотите отслеживать появление работ с определенными параметрами, вы можете использовать третьий вид парсера из папки [filter](filter). Инструкция по его использованию та же, что и для парсера в папке [mongodb](mongodb). Для просмотра инструкции перейдите по [данной ссылке](mongodb/README-MONGODB.md). 

### Требования к ссылке
* В ней не должно быть кириллицы. Если вы выбираете определенных персонажей в фильтре, закодируйте их имена в кодировке UTF-8.
* Если в ссылке содержится параметр `&find=Найти!#result`, необходимо его отрезать.
* Примерный вид ссылки: `https://ficbook.net/find?fandom_filter=fandom&fandom_group_id=1&fandom_ids%5B%5D=157436&pairings%5B0%5D%5Bchars%5D%5B%5D=582348&pairings%5B0%5D%5Bpairing%5D=%D0%9A%D0%BE%D1%80%D0%BD%D0%B5%D0%BB%D0%B8%D1%83%D1%81+%D0%A5%D0%B8%D0%BA%D0%BA%D0%B8&sizes%5B%5D=1&sizes%5B%5D=2&sizes%5B%5D=3&sizes%5B%5D=4&pages_min=&pages_max=&ratings%5B%5D=5&ratings%5B%5D=6&ratings%5B%5D=7&ratings%5B%5D=8&ratings%5B%5D=9&directions%5B%5D=1&directions%5B%5D=2&directions%5B%5D=3&directions%5B%5D=4&directions%5B%5D=7&directions%5B%5D=6&directions%5B%5D=5&likes_min=&likes_max=&date_create_min=2021-03-25&date_create_max=2021-03-25&date_update_min=2021-03-25&date_update_max=2021-03-25&title=&rnd=65911466`

## Дополнительно
Если вам кажется, что во время парсинга что-то пошло не так, нажмите `[CTRL+C]` для завершения процесса.
